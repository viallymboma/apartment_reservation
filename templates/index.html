{% extends "base.html" %}
{% load static %}
{% static 'img' as baseUrl %}

    {% block content %}

    <section class="site-hero overlay" style="background-image: url(/static/img/hero_1.jpg)" data-stellar-background-ratio="0.5">
      <div class="container">
        <div class="row site-hero-inner justify-content-center align-items-center">
          <div class="col-md-10 text-center" data-aos="fade-up">
            <h1 class="heading">Beautiful and Wonderful <br> Apartment</h1>
          </div>
        </div>
      </div>

      <a class="mouse smoothscroll" href="#next">
        <div class="mouse-icon">
          <span class="mouse-wheel"></span>
        </div>
      </a>
    </section>
    <!-- END section -->
                                      <!-- {% comment %}CHECK AVAILABILITY{% endcomment %} -->
    <!-- <section class="section bg-light"  id="next">
      <div class="container">
        <div class="row">
          <div class="col-md-7 mx-auto text-center mb-5">
            <h2 class="heading">Check Availabilty</h2>
          </div>
        </div>
        <div class="row">
          <div class="block-32">

            <form action="#">
              <div class="row">
                <div class="col-md-6 mb-3 mb-lg-0 col-lg-3">
                  <label for="checkin_date" class="font-weight-bold text-black">Check In</label>
                  <div class="field-icon-wrap">
                    <div class="icon"><span class="icon-calendar"></span></div>
                    <input type="text" id="checkin_date" class="form-control">
                  </div>
                </div>
                <div class="col-md-6 mb-3 mb-lg-0 col-lg-3">
                  <label for="checkout_date" class="font-weight-bold text-black">Check Out</label>
                  <div class="field-icon-wrap">
                    <div class="icon"><span class="icon-calendar"></span></div>
                    <input type="text" id="checkout_date" class="form-control">
                  </div>
                </div>
                <div class="col-md-6 mb-3 mb-md-0 col-lg-3">
                  <div class="row">
                    <div class="col-md-6 mb-3 mb-md-0">
                      <label for="adults" class="font-weight-bold text-black">Adults</label>
                      <div class="field-icon-wrap">
                        <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                        <select name="" id="adults" class="form-control">
                          <option value="">1</option>
                          <option value="">2</option>
                          <option value="">3</option>
                          <option value="">4+</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-md-6 mb-3 mb-md-0">
                      <label for="children" class="font-weight-bold text-black">Children</label>
                      <div class="field-icon-wrap">
                        <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                        <select name="" id="children" class="form-control">
                          <option value="">1</option>
                          <option value="">2</option>
                          <option value="">3</option>
                          <option value="">4+</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-3 align-self-end">
                  <button class="btn btn-success btn-block text-white">Check Availabilty</button>
                </div>
              </div>
            </form>
          </div>


        </div>
      </div>
    </section> -->
                             <!-- {% comment %}CHECK AVAILABILITY{% endcomment %} -->
    <section class="section">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-12 col-lg-7 ml-auto order-lg-2" data-aos="fade-up">
            <img src="{% static 'img/img_1.jpg' %}" alt="Image" class="img-fluid">
          </div>
          <div class="col-md-12 col-lg-4 order-lg-1" data-aos="fade-up">
            <h2 class="heading">Welcome <em>to</em> JESKA APARTMENT.</h2>
            <p class="lead">It is our pleasure to welcome you to JESKA APARTMENT. Whether you are traveling on business or pleasure, we know you have a variety of hotels to choose from. We strive to provide you a room that is clean and comfortable, with friendly attentive service at a value conscious price.   </p>
            <p class="mb-4">We want you to enjoy every day of every stay so we pledge to your our service guarantee. The professional and friendly staffs at JESKA APARTMENT are committed to making your stay both enjoyable and comfortable.</p>
            <p><a href="#" class="btn btn-success text-white py-2 mr-3">Read More</a> <span class="mr-3"></p>
          </div>

        </div>
      </div>
    </section>

    <section class="section bg-light">

      <div class="container">
        <div class="row justify-content-center text-center mb-5">
          <div class="col-md-8">
            <h2 class="heading" data-aos="fade-up">Great Offers</h2>
            <p class="lead" data-aos="fade-up">While discounts and special offers appeal to your audience’s wallet, effective content marketing should speak to their hearts. Moreover, hotel marketers should create messaging that strikes viewers’ emotions. Whether that’s aspirations for luxury experiences or relaxation, campaigns should appeal to guests’ desires. A powerful tool to do that is virtual reality. In a recent study of viewers who took a virtual tour of a Carnival cruise ship, 66 percent of people who viewed the experience said it excited them. Additionally, almost as many said, it gave them a “sense of joy,” and 58 percent described it as “amazing.” These are tangible emotions generated by a VR experience—not something a typical online ad might be expected to elicit.</p>
          </div>
        </div>
        <div class="sample">

        </div>
         <!-- {% for chambre in chambres %}
             {% if chambre.disponibilité %}
        <div class="site-block-half d-flex bg-white" data-aos="fade-up" data-aos-delay="100">
          <a href="#" class="image d-block bg-image" style="background-image: src='{{chambre.image.url}}';"></a>
          <div class="text">
            <span class="d-block"><span class="display-4 text-success">₱{{chambre.prix}}</span> / per night </span>
            <h2>{{ chambre.nom }}</h2>
            <p class="lead">{{ chambre.description }}</p>
            <p><a href="/Reservation" class="btn btn-success text-white">Book Now</a></p>
          </div>
        </div>
             {% endif %}
        {% endfor %} -->

        <div class="row justify-content-center text-center mt-5" data-aos="fade-up" data-aos-delay="300">
          <div class="col-md-4"><p><a href="{% url 'allRooms' %}" class="btn btn-success text-white py-3 px-5">View All Rooms</a></p></div>
        </div>
      </div>
    </section>

    <section class="section slider-section">
      <div class="container">
        <div class="row justify-content-center text-center mb-5">
          <div class="col-md-8">
            <h2 class="heading" data-aos="fade-up">See The Gallery</h2>
            <p class="lead" data-aos="fade-up" data-aos-delay="100">In the same way, an effective campaign for your property will showcase its unique story. Images or videos of your luxurious offerings are a good way to catch viewers’ eyes.</p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="home-slider major-caousel owl-carousel mb-5" data-aos="fade-up" data-aos-delay="200">
                {% for catalogue in catalogues %}
              <div class="slider-item">
                <img src="{{catalogue.image.url}}" alt="Image placeholder" class="img-fluid">
              </div>
                {% endfor %}

            </div>
            <!-- END slider -->
          </div>

          <div class="col-md-12 text-center"><a href="#" class="">View More Photos</a></div>

        </div>
      </div>
    </section>
    <!-- END section -->


    <!-- END section -->
    <section class="section testimonial-section">
      <div class="container">
        <div class="row justify-content-center text-center mb-5">
          <div class="col-md-8">
            <h2 class="heading" data-aos="fade-up">Testimonial</h2>
            <p>It is a lovely place to stay, with clean and comfortable rooms, great facilities like fridge, T.V., microwave, tea and coffee. The staff are very kind, cheerful and helpful.</p>
          </div>
        </div>



        <div class="row">
            {% for testimonial in testimonials %}
          <div class="js-carousel-2 owl-carousel mb-5" data-aos="fade-up" data-aos-delay="200">

            <div class="testimonial text-center slider-item">
              <div class="author-image mb-3">
              </div>
              <blockquote>

                <p>&ldquo;It is a lovely place to stay, with clean and comfortable rooms, great facilities like fridge, T.V., microwave, tea and coffee. The staff are very kind, cheerful and helpful.&rdquo;</p>
              </blockquote>
              <p><em>&mdash; Myrel FLores</em></p>
            </div>
              {% endfor %}

          </div>
            <!-- END slider -->
        </div>

      </div>
    </section>

    <section class="section blog-post-entry bg-light">
      <div class="container">
        <div class="row justify-content-center text-center mb-5">
          <div class="col-md-8">
            <h2 class="heading" data-aos="fade-up">Events</h2>
            <p class="lead" data-aos="fade-up">Manila Hotel embodies a rich tradition of elegant living, fine dining, and gracious service that goes back over 97 years. Set the perfect stage for meetings, parties</p>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-4 col-md-6 col-sm-6 col-12 post" data-aos="fade-up" data-aos-delay="100">

            <div class="media media-custom d-block mb-4">
              <a href="#" class="mb-4 d-block"><img src="{% static 'img/img_1.jpg' %}" alt="Image placeholder" class="img-fluid"></a>
              <div class="media-body">
                <span class="meta-post">May 3, 2021</span>
                <h2 class="mt-0 mb-3"><a href="#">Unwind with Your Family in our Luxury Services</a></h2>
              </div>
            </div>


          </div>
          <div class="col-lg-4 col-md-6 col-sm-6 col-12 post" data-aos="fade-up" data-aos-delay="200">
            <div class="media media-custom d-block mb-4">
              <a href="#" class="mb-4 d-block"><img src="{% static 'img/img_2.jpg' %}" alt="Image placeholder" class="img-fluid"></a>
              <div class="media-body">
                <span class="meta-post">May 2, 2021</span>
                <h2 class="mt-0 mb-3"><a href="#">Unwind with Your Family in our Luxury Services</a></h2>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-6 col-sm-6 col-12 post" data-aos="fade-up" data-aos-delay="300">
            <div class="media media-custom d-block mb-4">
              <a href="#" class="mb-4 d-block"><img src="{% static 'img/img_3.jpg' %}" alt="Image placeholder" class="img-fluid"></a>
              <div class="media-body">
                <span class="meta-post">May 1, 2021</span>
                <h2 class="mt-0 mb-3"><a href="#">Unwind with Your Family in our Luxury Services</a></h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section border-top">
      <div class="container" >
        <div class="row align-items-center">
          <div class="col-md-6" data-aos="fade-up">
            <h2>Make Yourself Comfortable in Any of Our Fully Air-conditioned Rooms</h2>
          </div>
          <div class="col-md-6 text-right" data-aos="fade-up" data-aos-delay="200">
            <a href="/Reservation" class="btn btn-success py-3 text-white px-5">Reserve Now</a>
          </div>
        </div>
      </div>
    </section>
    {% endblock content %}




    {% block javascripts %}

    <script>

      const baseURL = "http://127.0.0.1:8000/";
      const sample = document.querySelector(".sample");
      // console.log(testing_it_up)

      const myData = async () => {
          try {
            const raw_response = await fetch(`${baseURL}rooms/api/get_all_rooms/`);
            if (!raw_response.ok) { // check for the 404 errors
              throw new Error(raw_response.status);
            }
            const json_data = await raw_response.json();
            console.log(json_data);
            
            if (json_data.all_appartments.length > 0) {
              console.log(json_data.all_appartments)
              console.log(json_data.all_appartments[0].fields)
              const rooms_array = json_data.all_appartments;

              sample.innerHTML = `

                ${
                  rooms_array.map((room, index) => {
                    console.log("inside the map....")
                    console.log(room);

                    return `
                    <div class="site-block-half d-flex bg-white" data-aos="fade-up" data-aos-delay="100">
                      <a href="#" class="image d-block bg-image" style="background-image: url(http://127.0.0.1:8000/media/${room.fields.image});"></a>
                      <div class="text">
                        <span class="d-block"><span class="display-4 text-success">C ${ room.fields.price }</span> / per night </span>
                        <h2>${ room.fields.name }</h2>
                        <h3>${ room.fields.code }</h3>
                        <p class="lead">${room.fields.description }</p>
                        ${ room.fields.availability ? '<h3 class="btn-success">Available</h3>' : '<h3 class="btn-danger">Booked</h3>' }
                        ${ room.fields.availability ? `<p><a href='${baseURL}rooms/api/get_a_room/?q=${room.pk}' class="btn btn-success text-white" id="${ room.pk }">Book Now</a></p>` : '' }
                      </div>
                    </div>
                    `
                  })
                }
              
            `

            } else {
              console.log("no appart")
              container.innerHTML = `No Appartment in the Building`
            }
            // rooms_array.map((room, index) => {
            //   console.log("inside the map....")
            //   console.log(room);

            // })
          }
          catch (error) {
              console.log(error); 
          }
      }

      myData ()
      // fetchUsers();

    </script>

    {% endblock javascripts %}